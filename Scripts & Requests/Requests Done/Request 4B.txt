-- 18/03/2024 --
/*
OWNER	TABLE	COLUMN	DATA TYPE	DATA NULL
VLPDBA,SDEDBA	REF_CUSTOMER_MULTI_MISC_INFO	HAS_AFFILIATED_GROUP	VARCHAR2(1)	N
*/


DECLARE 
NFOUND NUMBER;
BEGIN
    SELECT COUNT(*) INTO NFOUND FROM ALL_TAB_COLUMNS 
    WHERE TABLE_NAME = 'REF_CUSTOMER_MULTI_MISC_INFO' 
    AND OWNER = 'SDEDBA' 
    AND COLUMN_NAME = 'HAS_AFFILIATED_GROUP';
    IF NFOUND = 0 THEN
    EXECUTE IMMEDIATE 'ALTER TABLE SDEDBA.REF_CUSTOMER_MULTI_MISC_INFO ADD HAS_AFFILIATED_GROUP VARCHAR2(1) DEFAULT ''0'' NOT NULL';
    END IF;
END;
/

DECLARE 
NFOUND NUMBER;
BEGIN
    SELECT COUNT(*) INTO NFOUND FROM ALL_TAB_COLUMNS 
    WHERE TABLE_NAME = 'REF_CUSTOMER_MULTI_MISC_INFO' 
    AND OWNER = 'VLPDBA' 
    AND COLUMN_NAME = 'HAS_AFFILIATED_GROUP';
    IF NFOUND = 0 THEN
    EXECUTE IMMEDIATE 'ALTER TABLE VLPDBA.REF_CUSTOMER_MULTI_MISC_INFO ADD HAS_AFFILIATED_GROUP VARCHAR2(1) DEFAULT ''0'' NOT NULL';
    END IF;
END;
/
